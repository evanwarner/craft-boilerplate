{#
  Default response headers. Any individual hash key can be overridden in a
  child template.

  TODO: set directives appropriate for the project
 #}
{% set cspDirectives = {
  'default-src': '\'self\'',
  'script-src': '\'self\' \'unsafe-inline\'',
  'style-src': '\'self\' \'unsafe-inline\'',
  'object-src': '\'none\'',
  'form-action': '\'self\'',
  'frame-ancestors': '\'self\'',
} | merge(cspDirectives ?? {}) %}

{% set headers = {
  'Content-Security-Policy': cspDirectives,
} | merge(headers ?? {}) %}

{% for headerName, value in headers %}
  {% if value is iterable %}
    {% set directives = [] %}
    {% for directive, directiveValue in value %}
      {% set directives = directives | merge([directive ~ ' ' ~ directiveValue]) %}
    {% endfor %}
    {% set value = directives | join('; ') %}
  {% endif %}
  {% header headerName ~ ': ' ~ value %}
{% endfor %}



<!DOCTYPE html>
<html class="no-js" lang="{{ currentSite.language | slice(0, 2) }}">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {# TODO: meta titles #}
  {% if entry is defined and entry and entry.type == 'homepage' %}
    {% set metaTitle = siteName %}
  {% else %}
    {% set metaTitle = (metaTitle ?? displayTitle ?? entry.title ?? '') ~ ' | ' ~ siteName %}
  {% endif %}
  <title>{{ metaTitle }}</title>

  {# TODO: meta descriptions #}
  {% set metaDescription = metaDescription ?? '' %}
  <meta name="description" content="{{ metaDescription }}">

  {% block referrer %}
    <meta name="referrer" content="unsafe-url">
  {% endblock %}
  {% block robots %}
    {% if getenv('ENVIRONMENT') != 'production' %}
      <meta name="robots" content="noindex, nofollow">
    {% endif %}
  {% endblock %}
  <meta name="format-detection" content="telephone=no">

  {# TODO: social sharing info #}
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ craft.app.request.absoluteUrl }}">
  <meta property="og:site_name" content="{{ siteName }}">
  <meta property="og:title" content="{{ metaTitle }}">
  <meta property="og:description" content="{{ metaDescription }}">
  <meta property="og:locale" content="{{ currentSite.language | slice(0, 2) }}">
  <meta property="og:image" content="">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="">
  <meta name="twitter:site" content="@">
  <meta name="twitter:creator" content="@">

  {# TODO: generate a 32x32 favicon.ico in webroot #}
  {# TODO: generate SVG favicon #}<link rel="icon" href="/favicon.svg">
  {# TODO: generate SVG pinned tab icon (and color) #}<link rel="mask-icon" href="/mask-icon.svg" color="#FFF">
  {# TODO: generate Web Clip icon #}<link rel="apple-touch-icon" sizes="180x180" href="/icon-180.png">
  {# TODO: generate Windows Tile icons (and tile color) #}<meta name="msapplication-config" content="/ieconfig.xml">
  {# TODO: generate Android home screen icons (and theme colors) #}<link rel="manifest" href="/manifest.json">
  <meta name="apple-mobile-web-app-title" content="{{ siteName }}">

  <script type="text/javascript">
    !function(){var h=document.documentElement.classList;h.remove('no-js');h.add('js');}();
  </script>

  <script defer src="{{ rev('js/main.js') }}"></script>
  <link rel="stylesheet" href="{{ rev('css/main.css') }}" media="screen">
  {{ head() }}
</head>
{% set bodyClasses = bodyClasses | default([]) %}
{% if entry is defined and entry %}
  {% set bodyClasses = bodyClasses | merge([entry.type | ucfirst ~ 'Page']) %}
{% endif %}
<body class="{{ bodyClasses | unique | join(' ') }}">
  {{ beginBody() }}
  <a class="SkipLink u-visuallyHidden u-focusable" href="#main-content" title="Jump to the main page content">Skip to content</a>

  <main id="main-content">
    {% block content %}{% endblock %}
  </main>

  {{ endBody() }}
  <link rel="stylesheet" href="{{ rev('css/print.css') }}" media="print">
</body>
</html>
